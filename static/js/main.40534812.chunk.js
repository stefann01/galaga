(this.webpackJsonpgalaga=this.webpackJsonpgalaga||[]).push([[0],[,,function(e,t,s){e.exports={container:"score_container__1ScWa",rightDisplayer:"score_rightDisplayer__1YFjj",life:"score_life__1FTkP",text:"score_text__3KUxO",overheadContainer:"score_overheadContainer__1fQs-",leftDisplayer:"score_leftDisplayer__2yMYq",leftDisplayerItem:"score_leftDisplayerItem__2EqSO"}},function(e,t,s){e.exports={container:"App_container__1CCjA",menuContainer:"App_menuContainer__2yO-P",buttons:"App_buttons__1REvI",PlayButton:"App_PlayButton__1aD-I",HelpButton:"App_HelpButton__kcHVG",buttonsText:"App_buttonsText__HdB2N",warningMessage:"App_warningMessage__1uWiT"}},function(e,t,s){e.exports={wrapper:"overHead_wrapper__P6R5V",progressBar:"overHead_progressBar__3_6At",indicator:"overHead_indicator__1qp73",text:"overHead_text__2t0B0"}},,function(e,t,s){e.exports={coin:"coins_coin__2ieoe",specialCoin:"coins_specialCoin__2qn7a"}},,,function(e,t,s){e.exports={bullet:"bullets_bullet__3xEOh"}},function(e,t,s){e.exports={enemy:"enemies_enemy__2MTdW"}},function(e,t,s){e.exports={bullet:"enemyBullets_bullet__2BeyS"}},function(e,t,s){e.exports={rocket:"rocket_rocket__2UCrn"}},,,,,,,function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n,i=s(1),r=s.n(i),c=s(7),l=s.n(c),o=s(8),a=s(3),d=s.n(a),h=s.p+"static/media/backgroundv2.52fdbc2d.mp4";!function(e){e[e.Move=0]="Move",e[e.Stop=1]="Stop",e[e.Shoot=2]="Shoot",e[e.MoveBullets=3]="MoveBullets",e[e.MoveEnemyBullet=4]="MoveEnemyBullet",e[e.AddEnemyBullet=5]="AddEnemyBullet",e[e.MoveCoins=6]="MoveCoins",e[e.AddEnemy=7]="AddEnemy",e[e.BuyLives=8]="BuyLives",e[e.IncreaseRocketPower=9]="IncreaseRocketPower"}(n||(n={}));var u=n,m=s(9),y=s.n(m),p=s(0);function x({bullets:e,dispatch:t}){return Object(i.useEffect)((()=>{const s=setInterval((()=>{e.length>0&&t({type:u.MoveBullets})}),5);return()=>clearInterval(s)}),[e.length,t]),Object(p.jsx)(p.Fragment,{children:e.length>0&&e.map(((e,t)=>Object(p.jsx)("div",{className:y.a.bullet,style:{left:e.x,top:e.y,width:e.width,height:e.height}},t)))})}var b=r.a.memo(x),v=s(6),j=s.n(v);function g({coins:e,dispatch:t}){return Object(i.useEffect)((()=>{const s=setInterval((()=>{e.length&&t({type:u.MoveCoins})}),10);return()=>clearInterval(s)}),[e.length,t]),Object(p.jsx)(p.Fragment,{children:e.map(((e,t)=>Object(p.jsx)("div",{className:e.isSpecial?j.a.specialCoin:j.a.coin,style:{left:e.x,top:e.y,width:e.width,height:e.height}},t)))})}var f=r.a.memo(g),w=s.p+"static/media/Monstrulet2.2.d6c4b34b.svg",O=s(10),_=s.n(O);var k=r.a.memo((({enemies:e})=>(console.log("Enemies render"),Object(p.jsx)(p.Fragment,{children:e.map(((e,t)=>Object(p.jsx)("img",{alt:`Enemy${t}`,className:_.a.enemy,style:{left:e.x,top:e.y,width:e.width,height:e.height},src:w},t)))}))),((e,t)=>JSON.stringify(e.enemies)===JSON.stringify(t.enemies)));class B{constructor(e,t,s,n,i=B.defaultEnemyLife){this.x=e,this.y=t,this.width=s,this.height=n,this.lifePoints=i}}B.enemyShootProbability=.2,B.defaultEnemyLife=1;var P=B,E=s(11),N=s.n(E);function M({enemyBullets:e,dispatch:t}){return Object(i.useEffect)((()=>{const e=setInterval((()=>{Math.random()<P.enemyShootProbability&&t({type:u.AddEnemyBullet})}),500);return()=>clearInterval(e)}),[t]),Object(i.useEffect)((()=>{const s=setInterval((()=>{e.length&&t({type:u.MoveEnemyBullet})}),10);return()=>clearInterval(s)}),[e.length,t]),Object(p.jsx)(p.Fragment,{children:e.length>0&&e.map(((e,t)=>Object(p.jsx)("div",{className:N.a.bullet,style:{left:e.x,top:e.y,width:e.width,height:e.height}},t)))})}var I=r.a.memo(M),S=s(12),C=s.n(S);var H=r.a.memo((function({rocket:e,dispatch:t}){return Object(i.useEffect)((()=>{function e(e){t({type:u.Move,payload:{x:e.clientX,y:e.clientY}})}return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}),[t]),Object(i.useEffect)((()=>{const e=e=>{32===e.keyCode&&t({type:u.Shoot}),66===e.keyCode&&t({type:u.BuyLives}),70===e.keyCode&&t({type:u.IncreaseRocketPower})},s=()=>{t({type:u.Shoot})};return window.addEventListener("click",s),window.addEventListener("keyup",e),()=>{window.removeEventListener("click",e),window.removeEventListener("keyup",s)}}),[t]),Object(p.jsx)("div",{className:C.a.rocket,style:{left:e.x,top:e.y,width:e.width,height:e.height}})}),((e,t)=>e.rocket.x===t.rocket.x)),A=s(4),L=s.n(A);function D({width:e,overheadPercentage:t}){const s={width:e},n={width:`${t}%`};return Object(p.jsxs)("div",{className:L.a.wrapper,children:[100===t&&Object(p.jsx)("h1",{className:L.a.text,children:" Overheat!"}),Object(p.jsx)("div",{className:L.a.progressBar,style:{...s},children:Object(p.jsx)("div",{className:L.a.indicator,style:{...n}})})]})}var F=s(2),W=s.n(F),T=s.p+"static/media/candy.5f2935f2.svg",G=s.p+"static/media/FullLife.058e894c.svg",R=s.p+"static/media/EmptyLife.7fe8e7ba.svg";var q=r.a.memo((function({lives:e,candies:t,score:s,overheadPercentage:n,enemiesNumber:i,rocketPower:r}){return Object(p.jsxs)("div",{className:W.a.container,children:[Object(p.jsxs)("div",{className:W.a.leftDisplayer,children:[Object(p.jsxs)("div",{className:W.a.leftDisplayerItem,children:[Object(p.jsx)("img",{src:T,alt:"candy",width:40,height:30}),Object(p.jsxs)("p",{className:W.a.text,children:[":",t]})]}),Object(p.jsxs)("div",{className:W.a.leftDisplayerItem,children:[Object(p.jsx)("img",{src:w,alt:"enemy"}),Object(p.jsxs)("p",{className:W.a.text,children:[":",i]})]}),Object(p.jsx)("div",{className:W.a.leftDisplayerItem,children:Object(p.jsxs)("p",{children:["Power: ",r]})})]}),Object(p.jsx)("div",{className:W.a.overheadContainer,children:Object(p.jsx)(D,{width:382,overheadPercentage:n})}),Object(p.jsxs)("div",{className:W.a.rightDisplayer,children:[e<5&&[...Array(5-e)].map((e=>Object(p.jsx)("img",{src:R,alt:`life${e}`}))),[...Array(e)].map((e=>Object(p.jsx)("img",{src:G,alt:`life${e}`})))]})]})}),((e,t)=>e.candies===t.candies&&e.overheadPercentage===t.overheadPercentage&&e.lives===t.lives));class J{constructor(e,t,s=J.bulletWidth,n=J.bulletHeight){this.x=e,this.y=t,this.width=s,this.height=n}}J.bulletTime=70,J.bulletSpace=.01,J.bulletWidth=20,J.bulletHeight=30;var $=J;class Y{constructor(e,t,s=Y.width,n=Y.height,i=!1){this.x=e,this.y=t,this.width=s,this.height=n,this.isSpecial=i}}Y.coinDropProbability=.3,Y.width=50,Y.height=40,Y.powerIncreasePrice=10;var K=Y;function U(e,t){switch(t.type){case u.Move:return{...e,rocket:{...e.rocket,x:t.payload.x,y:t.payload.y}};case u.IncreaseRocketPower:return{...e,rocket:e.candies>K.powerIncreasePrice?{...e.rocket,power:e.rocket.power+1}:e.rocket,candies:e.candies>K.powerIncreasePrice?e.candies-K.powerIncreasePrice:e.candies};case u.BuyLives:return e.candies>=5&&e.lives<5?{...e,candies:e.candies-5,lives:e.lives+1}:e;case u.Shoot:return e.isOverHead||e.sound.play(),{...e,bullets:e.isOverHead?e.bullets:[...e.bullets,new $(e.rocket.x+e.rocket.width/2-$.bulletWidth/2,e.rocket.y)],isOverHead:e.bullets.length>=5};case u.AddEnemyBullet:if(e.enemies.length){const t=Math.floor(Math.random()*e.enemies.length);return{...e,enemyBullets:[...e.enemyBullets,new $(e.enemies[t].x,e.enemies[t].y,20,40)]}}return e;case u.MoveCoins:let s=0,n=!1;return{...e,coins:e.coins.length?e.coins.map((e=>(e.y+=1,{...e}))).filter((e=>e.y<window.innerHeight)).filter((t=>{const i=V({x:t.x,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:e.rocket.x,y:e.rocket.y},{x:e.rocket.x+e.rocket.width,y:e.rocket.y+e.rocket.height});return i&&(s+=1,t.isSpecial&&(n=!0)),!i})):e.coins,candies:e.candies+s,rocket:n?{...e.rocket,power:e.rocket.power+1}:e.rocket};case u.MoveEnemyBullet:{const t=e.enemyBullets.find((t=>V({x:t.x,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:e.rocket.x,y:e.rocket.y},{x:e.rocket.x+e.rocket.width,y:e.rocket.y+e.rocket.height})));return{...e,enemyBullets:e.enemyBullets.length?e.enemyBullets.map((e=>(e.y+=1,{...e}))).filter((e=>e.y<window.innerHeight)).filter((e=>!(e.x===(null===t||void 0===t?void 0:t.x)&&e.y===(null===t||void 0===t?void 0:t.y)))):e.enemyBullets,isGameOver:0===e.lives,lives:t?e.lives-1:e.lives}}case u.MoveBullets:if(e.bullets.length){let t=[],s=[...e.coins];for(let n of e.bullets)for(let i of e.enemies)if(V({x:n.x,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:i.x,y:i.y},{x:i.x+i.width,y:i.y+i.height}))if(t=[...t,i],t=[...t,n],1===e.enemies.length){const e=new K(i.x,i.y);e.isSpecial=!0,s=[...s,e]}else Math.random()<=K.coinDropProbability&&i.lifePoints<=e.rocket.power&&(s=[...s,new K(i.x,i.y)]);return{...e,bullets:e.bullets.length>0?e.bullets.map((e=>(e.y-=2,e))).filter((e=>e.y>0)).filter((e=>!t.find((t=>t.x===e.x&&t.y===e.y)))):e.bullets,coins:s,enemies:t.length?e.enemies.map((s=>t.includes(s)?{...s,lifePoints:s.lifePoints-e.rocket.power}:s)).filter((e=>e.lifePoints>0)):[...e.enemies],score:e.score+Math.floor(t.length/2),isOverHead:e.bullets.length>=5}}return e;case u.AddEnemy:return{...e,enemies:[...e.enemies,new P(t.payload.x,t.payload.y,t.payload.width,t.payload.height)]};default:return e}}function V(e,t,s,n){return e.x!==t.x&&e.y!==t.y&&s.x!==n.x&&s.y!==n.y&&(!(e.x>=n.x||s.x>=t.x)&&!(e.y>=n.y||s.y>=t.y))}var Q=class{constructor(e,t,s,n,i=1){this.x=e,this.y=t,this.width=s,this.height=n,this.power=i}};function X(e,t,s,n=200){const i=[],r=n,c=(window.innerWidth-n-r)/(e-1);let l=r;for(let o=0;o<e;o++)i.push(new P(l-t/2,s,t,t)),l+=c;return i}function z(){let e=[];const t=.03*window.innerWidth;return e=[...X(11,t,100,200),...X(12,t,100+t+20,125),...X(11,t,100+2*(t+20),200)],e}var Z=function(){const[e,t]=Object(i.useState)(!1),[s,n]=Object(i.useState)(!1),r=Object(i.useMemo)((()=>new o.Howl({src:"https://soundbible.com/mp3/Laser%20Blasts-SoundBible.com-108608437.mp3",html5:!0,volume:.15})),[]),[c,l]=Object(i.useReducer)(U,{rocket:new Q(window.innerWidth/2,window.innerHeight-150,150,200),bullets:[],enemyBullets:[],enemies:z(),pressedKeys:new Set,score:0,isGameOver:!1,isOverHead:!1,coins:new Array,candies:0,lives:5,sound:r});return Object(i.useEffect)((()=>{c.isGameOver&&(n(!0),t(!1))}),[c.isGameOver]),Object(p.jsxs)(p.Fragment,{children:[e&&Object(p.jsxs)("div",{style:{position:"relative"},children:[Object(p.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,style:{position:"fixed",right:"0",bottom:"0",minWidth:"100%",maxWidth:"100%"},children:Object(p.jsx)("source",{src:h,type:"video/mp4"})}),Object(p.jsxs)("div",{className:d.a.container,children:[Object(p.jsx)(q,{lives:c.lives,score:c.score,candies:c.candies,overheadPercentage:c.bullets.length/5*100,enemiesNumber:c.enemies.length,rocketPower:c.rocket.power}),Object(p.jsx)(H,{dispatch:l,rocket:c.rocket}),Object(p.jsx)(b,{bullets:c.bullets,dispatch:l}),Object(p.jsx)(k,{enemies:c.enemies}),Object(p.jsx)(I,{enemyBullets:c.enemyBullets,dispatch:l}),Object(p.jsx)(f,{coins:c.coins,dispatch:l})]})]}),!e&&Object(p.jsx)(p.Fragment,{children:s?Object(p.jsx)("h1",{children:"Game Over"}):Object(p.jsxs)("div",{className:d.a.menuContainer,children:[Object(p.jsx)("h1",{className:d.a.warningMessage,children:"Work still in progress... \u2615"}),Object(p.jsxs)("div",{className:d.a.buttons,children:[Object(p.jsx)("button",{className:d.a.PlayButton,onClick:()=>{t(!0),n(!1)},children:Object(p.jsx)("h2",{className:d.a.buttonsText,children:" Play Game "})}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{className:d.a.HelpButton,children:Object(p.jsx)("h2",{className:d.a.buttonsText,children:" Help "})})]})]})})]})},ee=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,21)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),n(e),i(e),r(e),c(e)}))};s(19);l.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(Z,{})}),document.getElementById("root")),ee()}],[[20,1,2]]]);
//# sourceMappingURL=main.40534812.chunk.js.map